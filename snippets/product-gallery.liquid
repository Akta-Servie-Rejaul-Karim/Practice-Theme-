 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
   <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<div class="product-gallery">

  <div style="--swiper-navigation-color: #fff; --swiper-pagination-color: #fff" class="swiper mySwiper2">
    <div class="swiper-wrapper">
      {%  for media in product.media %}
      <div class="swiper-slide" data-media-id="{{ media.id }}">
        {{ media | image_url: width: 600, height: auto | image_tag  }}
      </div>  
        {% endfor %}
    </div>
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
  </div>
  <div thumbsSlider="" class="swiper mySwiper">
    <div class="swiper-wrapper">
     {%  for media in product.media %}
        <div class="swiper-slide" data-media-id="{{ media.id }}">
         {{ media | image_url: width: 600, height: auto | image_tag: loading: lazy }}
        </div>
      {% endfor %}
     
  </div>  
</div>




<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Initialize Swipers
    const thumbsSwiper = new Swiper(".mySwiper", {
      spaceBetween: 10,
      slidesPerView: 4,
      freeMode: true,
      watchSlidesProgress: true,
    });

    const mainSwiper = new Swiper(".mySwiper2", {
      spaceBetween: 10,
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
      thumbs: {
        swiper: thumbsSwiper,
      },
    });

    // Helper: Find slide index by data-media-id
    function findSlideIndexByMediaId(mediaId) {
      const slides = document.querySelectorAll('.mySwiper2 .swiper-slide');
      for (let i = 0; i < slides.length; i++) {
        if (slides[i].dataset.mediaId === mediaId.toString()) {
          return i;
        }
      }
      return -1;
    }

    // When variant is selected and mediaId is stored globally
    document.querySelectorAll('.variant-picker input[type="radio"]').forEach(input => {
      input.addEventListener("change", function () {
        const mediaId = window.selectedMediaId;
        if (!mediaId) return;

        const index = findSlideIndexByMediaId(mediaId);
        if (index >= 0) {
          mainSwiper.slideTo(index);
        }
      });
    });
  });
</script>





